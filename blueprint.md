# 📘 專案藍圖：寵客玩寵物美容旅館預約系統

## 一、專案概述

本專案旨在根據使用者提供的 UI 畫面，打造一個名為「寵客玩 (PetCheckOne)」的寵物美容旅館預約系統。此系統為一個純前端的 Web App，採用 Vue 3、Vite、Vuetify 和 Pinia 作為主要技術棧。

所有資料（如會員、寵物、服務、預約）都透過 Pinia 進行狀態管理，並使用模擬資料進行填充，以展示完整的應用程式流程。

## 二、設計與風格指南

*   **色彩：** 主要品牌色為溫暖的橘色 (`#FFA726`)，搭配乾淨的淺色背景。
*   **佈局：** 以行動裝置優先的卡片式設計，底部導覽列為主要入口。
*   **圖示：** 使用 Material Design Icons (`mdi-*`)，提供直觀的操作引導。
*   **字體：** 清晰易讀的無襯線字體。
*   **UI 元件：** 按鈕、卡片等採用圓角設計，風格簡潔。

## 三、已完成功能

### 1. 主應用程式框架 (App Frame)
*   包含 `v-app-bar` 和 `v-bottom-navigation`。
*   四個主要功能頁面：服務項目、預約服務、店家資訊、會員資料。

### 2. 會員系統 (Authentication)
*   **核心改造**：會員系統已從 Email 改為以 **手機號碼** 為唯一識別碼。
*   具備完整的註冊、登入、登出流程。
*   **資料擴充**：會員資料頁面可編輯姓名、**緊急聯絡人**及**第二聯絡人**資訊。
*   使用 Pinia (`authStore`) 管理登入狀態與會員資料，並啟用持久化。
*   透過路由守衛保護需要登入的頁面。

### 3. 寵物管理 (Pet Management)
*   可顯示、新增、編輯寵物資料。
*   新增寵物時，根據體重自動判斷體型 (小型/中型/大型)。
*   使用 Pinia (`petStore`) 管理寵物資料，並啟用持久化。
*   **已移除** 新使用者註冊時的預設寵物。

### 4. 服務與預約系統
*   **價目表**：建立了包含「預估作業時間」的清晰價目表 (`Services.vue`)。
*   **預約流程**：
    *   建立了完整的預約、查詢及取消流程。
    *   支援多寵物、多服務選擇。
    *   日期選擇器實現了**全中文化**與**智慧禁用過期時段**。
*   **預約查詢**：會員中心的「我的預約」卡片能詳盡展示**每隻寵物**的**服務項目**及**預估總工時**。

### 5. 會員中心介面美化
*   將 `Profile.vue` 頁面升級為視覺豐富、互動性強的使用者中心。
*   **頂部個人化頭像卡片**：採用了置中大頭像、漸層色背景的設計。
*   **預設頭像圖示化**：在使用者未上傳頭像時，顯示通用的 `mdi-account-circle` 圖示。
*   **寵物長廊**：將寵物列表改為可橫向滑動的互動卡片列。
*   **清爽佈局**：移除了分隔線，並將編輯功能收納至彈出對話框。

---

## 四、當前迭代計畫：恢復並增強會員編輯功能

### 目標
恢復因先前錯誤而失效的會員編輯功能，並根據使用者要求，新增「第二聯絡人」的欄位，確保資料結構的完整與程式的穩健。

### 改造計畫

1.  **升級資料結構 (`authStore.js`)**:
    *   **任務**: 在 Pinia 的 `user` 物件資料結構中，新增 `secondaryContact: { name: '', phone: '' }` 欄位，以支援第二聯絡人。
    *   **實作**: 修改 `authStore.js` 中 `register` 和 `login` 函式返回的預設使用者物件，確保新註冊和既有使用者都擁有此結構。

2.  **改造編輯介面 (`Profile.vue`)**:
    *   **任務**: 在「編輯個人資料」彈出視窗中，新增「第二聯絡人」的姓名與電話輸入框。
    *   **實作**: 在 `v-dialog` 中，於「緊急聯絡人」區塊下方，複製一組 `v-text-field` 並綁定至 `editableUser.secondaryContact`。

3.  **強化程式邏輯 (`Profile.vue`)**:
    *   **任務**: 重構資料處理邏輯，確保在編輯時能安全地處理舊會員（可能沒有 `emergencyContact` 或 `secondaryContact` 欄位）的資料，防止程式崩潰。
    *   **實作**: 
        *   修改 `openEditDialog` 函式，在複製資料後，主動檢查並補上 `emergencyContact` 和 `secondaryContact` 這兩個空物件，確保編輯目標的結構完整。
        *   更新 `isDirty` 計算屬性，使其能正確比較包含這兩個新欄位的物件，精準判斷資料是否被修改。
